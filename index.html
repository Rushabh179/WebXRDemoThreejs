<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Hello WebXR!</title>

  <style>
    canvas {
      background: red;
    }
  </style>

</head>

<body>
  <!-- three.js -->
  <script src="https://unpkg.com/three@0.126.0/build/three.js"></script>

  <!-- Starting an immersive WebXR session requires user interaction.
    We start this one with a simple button. -->
  <button onclick="activateXR()">Start Hello WebXR</button>
  <script>
    var canvas, gl;
    async function activateXR() {
      // Add a canvas element and initialize a WebGL context that is compatible with WebXR.
      canvas = document.createElement("canvas");
      document.body.appendChild(canvas);
      gl = canvas.getContext("webgl", { xrCompatible: true });

      // To be continued in upcoming steps.
    }

    // Set up the WebGLRenderer, which handles rendering to the session's base layer.
    var renderer = new THREE.WebGLRenderer({
      alpha: true,
      preserveDrawingBuffer: true,
      canvas: canvas,
      context: gl
    });
    renderer.autoClear = false;

    // The API directly updates the camera matrices.
    // Disable matrix auto updates so three.js doesn't attempt
    // to handle the matrices independently.
    var camera = new THREE.PerspectiveCamera();
    camera.matrixAutoUpdate = false;

    var scene = new THREE.Scene();

    // The cube will have a different color on each side.
    var materials = [
      new THREE.MeshBasicMaterial({ color: 0xff0000 }),
      new THREE.MeshBasicMaterial({ color: 0x0000ff }),
      new THREE.MeshBasicMaterial({ color: 0x00ff00 }),
      new THREE.MeshBasicMaterial({ color: 0xff00ff }),
      new THREE.MeshBasicMaterial({ color: 0x00ffff }),
      new THREE.MeshBasicMaterial({ color: 0xffff00 })
    ];

    // Create the cube and add it to the demo scene.
    var cube = new THREE.Mesh(new THREE.BoxBufferGeometry(0.2, 0.2, 0.2), materials);
    cube.position.set(1, 1, 1);
    scene.add(cube);
  </script>
</body>

</html>